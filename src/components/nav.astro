---
// Define dropdown menu items
const serviciosItems = [
  { text: "Envíos Express", url: "/mensajeria-envios-express" },
  { text: "Envíos LowCost", url: "/mensajeria-envios-lowcost" },
  { text: "Moto Express", url: "/delivery-moto-express" },
  { text: "Moto Fija", url: "/delivery-moto-fija" },
  { text: "Plan Emprendedores", url: "/envios-emprendedores" }
];

const cotizarItems = [
  { text: "Cotizar Express", url: "/cotizador-envios-express" },
  { text: "Cotizar LowCost", url: "/cotizador-envios-lowcost" }
];

const nosotrosItems = [
  { text: "Sobre Nosotros", url: "/sobre-nosotros" },
  { text: "Preguntas Frecuentes", url: "/preguntasfrecuentes" },
  { text: "Nuestras Redes", url: "/nuestrasredes" }
];
---

<!-- Desktop Navigation -->
<nav class="hidden lg:block">
  <ul class="flex items-center space-x-1">
    <!-- Inicio -->
    <li class="relative group">
      <a href="/" class="block px-4 py-2 text-blue-700 hover:text-amber-500 dark:text-blue-100 dark:hover:text-amber-400 font-medium transition-colors rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40">
        Inicio
      </a>
    </li>
    
    <!-- Servicios Dropdown -->
    <li class="relative group" x-data="{ open: false }">
      <button 
        @click="open = !open" 
        @click.away="open = false"
        class="flex items-center px-4 py-2 text-blue-700 group-hover:text-amber-500 dark:text-blue-100 dark:group-hover:text-amber-400 font-medium transition-colors rounded-md group-hover:bg-blue-50 dark:group-hover:bg-blue-900/40"
      >
        Servicios
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1 transition-transform duration-200" :class="{'rotate-180': open}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      
      <div 
        x-show="open" 
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 translate-y-1"
        x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 translate-y-0"
        x-transition:leave-end="opacity-0 translate-y-1"
        class="absolute left-0 mt-1 w-56 bg-white dark:bg-blue-900 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50 border border-blue-100 dark:border-blue-800"
        x-cloak
      >
        <div class="py-1">
          {serviciosItems.map(item => (
            <a href={item.url} class="block px-4 py-2 text-sm text-blue-700 dark:text-blue-100 hover:bg-blue-50 dark:hover:bg-blue-800 hover:text-amber-500 dark:hover:text-amber-400 transition-colors">
              {item.text}
            </a>
          ))}
        </div>
      </div>
    </li>
    
    <!-- Cotizar Dropdown -->
    <li class="relative group" x-data="{ open: false }">
      <button 
        @click="open = !open" 
        @click.away="open = false"
        class="flex items-center px-4 py-2 text-blue-700 group-hover:text-amber-500 dark:text-blue-100 dark:group-hover:text-amber-400 font-medium transition-colors rounded-md group-hover:bg-blue-50 dark:group-hover:bg-blue-900/40"
      >
        Cotizar
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1 transition-transform duration-200" :class="{'rotate-180': open}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      
      <div 
        x-show="open" 
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 translate-y-1"
        x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 translate-y-0"
        x-transition:leave-end="opacity-0 translate-y-1"
        class="absolute left-0 mt-1 w-56 bg-white dark:bg-blue-900 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50 border border-blue-100 dark:border-blue-800"
        x-cloak
      >
        <div class="py-1">
          {cotizarItems.map(item => (
            <a href={item.url} class="block px-4 py-2 text-sm text-blue-700 dark:text-blue-100 hover:bg-blue-50 dark:hover:bg-blue-800 hover:text-amber-500 dark:hover:text-amber-400 transition-colors">
              {item.text}
            </a>
          ))}
        </div>
      </div>
    </li>
    
    <!-- Nosotros Dropdown -->
    <li class="relative group" x-data="{ open: false }">
      <button 
        @click="open = !open" 
        @click.away="open = false"
        class="flex items-center px-4 py-2 text-blue-700 group-hover:text-amber-500 dark:text-blue-100 dark:group-hover:text-amber-400 font-medium transition-colors rounded-md group-hover:bg-blue-50 dark:group-hover:bg-blue-900/40"
      >
        Nosotros
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1 transition-transform duration-200" :class="{'rotate-180': open}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      
      <div 
        x-show="open" 
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 translate-y-1"
        x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 translate-y-0"
        x-transition:leave-end="opacity-0 translate-y-1"
        class="absolute left-0 mt-1 w-56 bg-white dark:bg-blue-900 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50 border border-blue-100 dark:border-blue-800"
        x-cloak
      >
        <div class="py-1">
          {nosotrosItems.map(item => (
            <a href={item.url} class="block px-4 py-2 text-sm text-blue-700 dark:text-blue-100 hover:bg-blue-50 dark:hover:bg-blue-800 hover:text-amber-500 dark:hover:text-amber-400 transition-colors">
              {item.text}
            </a>
          ))}
        </div>
      </div>
    </li>
    
    <!-- Contacto -->
    <li class="relative group">
      <a href="/contacto" class="block px-4 py-2 text-blue-700 hover:text-amber-500 dark:text-blue-100 dark:hover:text-amber-400 font-medium transition-colors rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40">
        Contacto
      </a>
    </li>
  </ul>
</nav>

<!-- Mobile Menu Button -->
<button 
  x-data="{ open: false }"
  @click="open = !open; $dispatch('toggle-mobile-menu', {open})"
  class="lg:hidden p-2 rounded-md text-blue-700 hover:text-amber-500 dark:text-blue-100 dark:hover:text-amber-400 hover:bg-blue-50 dark:hover:bg-blue-900/40 focus:outline-none focus:ring-2 focus:ring-amber-400 transition-colors"
  aria-label="Toggle menu"
>
  <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
  </svg>
  <svg x-show="open" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" x-cloak>
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
  </svg>
</button>

<!-- Mobile Menu -->
<div 
  x-data="{ open: false, activeSubmenu: null }" 
  @toggle-mobile-menu.window="open = $event.detail.open"
  x-show="open"
  x-transition:enter="transition ease-out duration-200"
  x-transition:enter-start="opacity-0 -translate-y-4"
  x-transition:enter-end="opacity-100 translate-y-0"
  x-transition:leave="transition ease-in duration-150"
  x-transition:leave-start="opacity-100 translate-y-0"
  x-transition:leave-end="opacity-0 -translate-y-4"
  class="lg:hidden bg-white dark:bg-blue-950 border-t border-blue-100 dark:border-blue-900 fixed w-full left-0 top-[72px] z-40"
  x-cloak
>
  <nav class="container-custom py-4">
    <ul class="space-y-1">
      <!-- Inicio -->
      <li>
        <a href="/" class="block px-4 py-2 text-blue-700 hover:text-amber-500 dark:text-blue-100 dark:hover:text-amber-400 font-medium rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors">
          Inicio
        </a>
      </li>
      
      <!-- Servicios Dropdown -->
      <li x-data="{ open: false }">
        <button 
          @click="open = !open; activeSubmenu = open ? 'servicios' : null" 
          class="flex items-center justify-between w-full px-4 py-2 text-blue-700 hover:text-amber-500 dark:text-blue-100 dark:hover:text-amber-400 font-medium rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors"
        >
          <span>Servicios</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform duration-200" :class="{'rotate-180': open}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <div 
          x-show="open" 
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 max-h-0"
          x-transition:enter-end="opacity-100 max-h-96"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 max-h-96"
          x-transition:leave-end="opacity-0 max-h-0"
          class="overflow-hidden"
        >
          <div class="pl-4 py-1 border-l-2 border-blue-100 dark:border-blue-800 ml-4 mt-1 space-y-1">
            {serviciosItems.map(item => (
              <a href={item.url} class="block px-4 py-2 text-sm text-blue-700 dark:text-blue-100 hover:text-amber-500 dark:hover:text-amber-400 rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors">
                {item.text}
              </a>
            ))}
          </div>
        </div>
      </li>
      
      <!-- Cotizar Dropdown -->
      <li x-data="{ open: false }">
        <button 
          @click="open = !open; activeSubmenu = open ? 'cotizar' : null" 
          class="flex items-center justify-between w-full px-4 py-2 text-blue-700 hover:text-amber-500 dark:text-blue-100 dark:hover:text-amber-400 font-medium rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors"
        >
          <span>Cotizar</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform duration-200" :class="{'rotate-180': open}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <div 
          x-show="open" 
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 max-h-0"
          x-transition:enter-end="opacity-100 max-h-96"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 max-h-96"
          x-transition:leave-end="opacity-0 max-h-0"
          class="overflow-hidden"
        >
          <div class="pl-4 py-1 border-l-2 border-blue-100 dark:border-blue-800 ml-4 mt-1 space-y-1">
            {cotizarItems.map(item => (
              <a href={item.url} class="block px-4 py-2 text-sm text-blue-700 dark:text-blue-100 hover:text-amber-500 dark:hover:text-amber-400 rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors">
                {item.text}
              </a>
            ))}
          </div>
        </div>
      </li>
      
      <!-- Nosotros Dropdown -->
      <li x-data="{ open: false }">
        <button 
          @click="open = !open; activeSubmenu = open ? 'nosotros' : null" 
          class="flex items-center justify-between w-full px-4 py-2 text-blue-700 hover:text-amber-500 dark:text-blue-100 dark:hover:text-amber-400 font-medium rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors"
        >
          <span>Nosotros</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform duration-200" :class="{'rotate-180': open}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <div 
          x-show="open" 
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 max-h-0"
          x-transition:enter-end="opacity-100 max-h-96"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 max-h-96"
          x-transition:leave-end="opacity-0 max-h-0"
          class="overflow-hidden"
        >
          <div class="pl-4 py-1 border-l-2 border-blue-100 dark:border-blue-800 ml-4 mt-1 space-y-1">
            {nosotrosItems.map(item => (
              <a href={item.url} class="block px-4 py-2 text-sm text-blue-700 dark:text-blue-100 hover:text-amber-500 dark:hover:text-amber-400 rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors">
                {item.text}
              </a>
            ))}
          </div>
        </div>
      </li>
      
      <!-- Contacto -->
      <li>
        <a href="/contacto" class="block px-4 py-2 text-blue-700 hover:text-amber-500 dark:text-blue-100 dark:hover:text-amber-400 font-medium rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors">
          Contacto
        </a>
      </li>
      
      <!-- Mobile CTA -->
      <li class="pt-2">
        <a href="/cotizador-envios-express" class="block mx-4 px-4 py-3 bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 text-blue-900 font-medium rounded-md text-center transition-all duration-300 shadow-md hover:shadow-lg">
          Cotizar Ahora
        </a>
      </li>
    </ul>
  </nav>
</div>

<style>
  /* Hide Alpine.js elements before Alpine loads */
  [x-cloak] { display: none !important; }
  
  /* Smooth transitions for all interactive elements */
  a, button {
    transition: all 0.2s ease-in-out;
  }
</style>